<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User & Browser Info</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f5f5f5;
      color: #333;
    }
    h1, h2 {
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.3em;
    }
    section {
      background: #fff;
      margin: 1rem 0;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }
    th, td {
      text-align: left;
      padding: 0.4rem;
      border-bottom: 1px solid #eee;
    }
    th {
      background: #f0f0f0;
    }
    .summary {
      background: #dbeafe;
      border-left: 5px solid #3b82f6;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 8px;
    }
    .version {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin: 1rem 0;
    }
    #map {
      height: 300px;
      margin-top: 1rem;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="version">Version 1.2 - User Info Page</div>  <h1>User & Browser Information</h1>
  <div class="summary" id="summary"></div>
  <div id="map"></div>  <section>
    <h2>Navigator Info</h2>
    <table id="navigator-info"></table>
  </section>  <section>
    <h2>Screen Info</h2>
    <table id="screen-info"></table>
  </section>  <section>
    <h2>Time & Locale</h2>
    <table id="locale-info"></table>
  </section>  <section>
    <h2>IP Address</h2>
    <table id="ip-info"></table>
  </section>  <div class="version">Version 1.2 - User Info Page</div>  <script>
    function setTable(tableId, data) {
      const table = document.getElementById(tableId);
      for (const [key, value] of data) {
        const row = table.insertRow();
        row.insertCell().textContent = key;
        row.insertCell().textContent = value;
      }
    }

    function tryGet(fn, fallback = 'N/A') {
      try {
        return fn();
      } catch {
        return fallback;
      }
    }

    const nav = navigator;
    const screenInfo = screen;

    const navigatorData = [
      ['User Agent', nav.userAgent],
      ['Platform', nav.platform],
      ['App Name', nav.appName],
      ['App Version', nav.appVersion],
      ['Product', nav.product],
      ['Product Sub', nav.productSub],
      ['Vendor', nav.vendor],
      ['Language', nav.language],
      ['Languages', (nav.languages || []).join(', ')],
      ['Hardware Concurrency', nav.hardwareConcurrency || 'N/A'],
      ['Max Touch Points', nav.maxTouchPoints || 'N/A'],
      ['Cookie Enabled', nav.cookieEnabled],
      ['Online', nav.onLine],
      ['Java Enabled', tryGet(() => nav.javaEnabled())],
      ['PDF Viewer', tryGet(() => nav.pdfViewerEnabled, 'Unknown')],
      ['Do Not Track', nav.doNotTrack]
    ];

    const screenData = [
      ['Width', screenInfo.width],
      ['Height', screenInfo.height],
      ['Available Width', screenInfo.availWidth],
      ['Available Height', screenInfo.availHeight],
      ['Color Depth', screenInfo.colorDepth],
      ['Pixel Depth', screenInfo.pixelDepth],
      ['Orientation', tryGet(() => screen.orientation.type || screen.msOrientation || screen.mozOrientation, 'N/A')]
    ];

    const localeData = [
      ['Timezone Offset (min)', new Date().getTimezoneOffset()],
      ['Time Zone', Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown'],
      ['Locale', Intl.DateTimeFormat().resolvedOptions().locale || 'Unknown'],
      ['Current Time', new Date().toString()]
    ];

    setTable('navigator-info', navigatorData);
    setTable('screen-info', screenData);
    setTable('locale-info', localeData);

    const summaryEl = document.getElementById('summary');
    const ua = nav.userAgent.toLowerCase();
    let browser = 'Unknown';
    if (ua.includes('edg')) browser = 'Microsoft Edge';
    else if (ua.includes('chrome')) browser = 'Google Chrome';
    else if (ua.includes('safari')) browser = 'Safari';
    else if (ua.includes('firefox')) browser = 'Mozilla Firefox';
    else if (ua.includes('trident') || ua.includes('msie')) browser = 'Internet Explorer';

    const isMobile = /android|iphone|ipad|ipod|windows phone/.test(ua);
    const platform = nav.platform;

    let geoInfo = 'Location permission denied or unavailable.';
    let addressInfo = 'Address unavailable.';
    let mapInitialized = false;

    function updateSummaryWithGeo(position) {
      const { latitude, longitude, accuracy } = position.coords;
      geoInfo = `Latitude: ${latitude.toFixed(5)}, Longitude: ${longitude.toFixed(5)} (Â±${accuracy}m)`;

      fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`)
        .then(res => res.json())
        .then(data => {
          addressInfo = data.display_name || 'Address lookup failed.';
          renderSummary(latitude, longitude);
        })
        .catch(() => {
          addressInfo = 'Address lookup failed.';
          renderSummary(latitude, longitude);
        });

      if (!mapInitialized) {
        const map = L.map('map').setView([latitude, longitude], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        L.marker([latitude, longitude]).addTo(map).bindPopup("You are here").openPopup();
        mapInitialized = true;
      }
    }

    function renderSummary(lat = null, lon = null) {
      summaryEl.innerHTML = `
        <strong>Best Guess:</strong><br>
        Browser: ${browser}<br>
        Device Type: ${isMobile ? 'Mobile' : 'Desktop'}<br>
        Platform: ${platform}<br>
        Time Zone: ${Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown'}<br>
        Language: ${nav.language}<br>
        Geolocation: ${geoInfo}<br>
        Address: ${addressInfo}<br>
        IP Address: <span id="ip-addr">Loading...</span>
      `;
    }

    if ('geolocation' in nav) {
      nav.geolocation.getCurrentPosition(
        updateSummaryWithGeo,
        () => {
          geoInfo = 'Location permission denied or unavailable.';
          renderSummary();
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    } else {
      renderSummary();
    }

    fetch('https://api.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('ip-addr').textContent = data.ip;
        setTable('ip-info', [['IP Address', data.ip]]);
      })
      .catch(() => {
        document.getElementById('ip-addr').textContent = 'Unavailable';
        setTable('ip-info', [['IP Address', 'Unavailable']]);
      });
  </script></body>
</html>
