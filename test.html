<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User & Browser Info</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f5f5f5;
      color: #333;
    }
    h1, h2 {
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.3em;
    }
    section {
      background: #fff;
      margin: 1rem 0;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }
    th, td {
      text-align: left;
      padding: 0.4rem;
      border-bottom: 1px solid #eee;
    }
    th {
      background: #f0f0f0;
    }
    .summary {
      background: #dbeafe;
      border-left: 5px solid #3b82f6;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 8px;
    }
    .version {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <div class="version">Version 1.0 - User Info Page</div>

  <h1>User & Browser Information</h1>
  <div class="summary" id="summary"></div>

  <section>
    <h2>Navigator Info</h2>
    <table id="navigator-info"></table>
  </section>

  <section>
    <h2>Screen Info</h2>
    <table id="screen-info"></table>
  </section>

  <section>
    <h2>Window Info</h2>
    <table id="window-info"></table>
  </section>

  <section>
    <h2>Time & Locale</h2>
    <table id="locale-info"></table>
  </section>

  <section>
    <h2>Features Detection</h2>
    <table id="features-info"></table>
  </section>

  <section>
    <h2>Deprecated / Legacy Info</h2>
    <table id="legacy-info"></table>
  </section>

  <div class="version">Version 1.0 - User Info Page</div>

  <script>
    function setTable(tableId, data) {
      const table = document.getElementById(tableId);
      for (const [key, value] of data) {
        const row = table.insertRow();
        row.insertCell().textContent = key;
        row.insertCell().textContent = value;
      }
    }

    function tryGet(fn, fallback = 'N/A') {
      try {
        return fn();
      } catch {
        return fallback;
      }
    }

    const nav = navigator;
    const screenInfo = screen;
    const win = window;

    const navigatorData = [
      ['User Agent', nav.userAgent],
      ['Platform', nav.platform],
      ['App Name', nav.appName],
      ['App Version', nav.appVersion],
      ['Product', nav.product],
      ['Product Sub', nav.productSub],
      ['Vendor', nav.vendor],
      ['Language', nav.language],
      ['Languages', (nav.languages || []).join(', ')],
      ['Hardware Concurrency', nav.hardwareConcurrency || 'N/A'],
      ['Max Touch Points', nav.maxTouchPoints || 'N/A'],
      ['Cookie Enabled', nav.cookieEnabled],
      ['Online', nav.onLine],
      ['Java Enabled', tryGet(() => nav.javaEnabled())],
      ['PDF Viewer', tryGet(() => nav.pdfViewerEnabled, 'Unknown')],
      ['Do Not Track', nav.doNotTrack]
    ];

    const screenData = [
      ['Width', screenInfo.width],
      ['Height', screenInfo.height],
      ['Available Width', screenInfo.availWidth],
      ['Available Height', screenInfo.availHeight],
      ['Color Depth', screenInfo.colorDepth],
      ['Pixel Depth', screenInfo.pixelDepth],
      ['Orientation', tryGet(() => screen.orientation.type || screen.msOrientation || screen.mozOrientation, 'N/A')]
    ];

    const windowData = [
      ['Inner Width', win.innerWidth],
      ['Inner Height', win.innerHeight],
      ['Outer Width', win.outerWidth],
      ['Outer Height', win.outerHeight],
      ['Device Pixel Ratio', win.devicePixelRatio]
    ];

    const localeData = [
      ['Timezone Offset (min)', new Date().getTimezoneOffset()],
      ['Time Zone', Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown'],
      ['Locale', Intl.DateTimeFormat().resolvedOptions().locale || 'Unknown'],
      ['Current Time', new Date().toString()]
    ];

    const features = [
      ['Local Storage', 'localStorage' in win],
      ['Session Storage', 'sessionStorage' in win],
      ['IndexedDB', 'indexedDB' in win],
      ['Service Workers', 'serviceWorker' in nav],
      ['WebGL', (() => {
        try {
          const canvas = document.createElement('canvas');
          return !!canvas.getContext('webgl');
        } catch { return false; }
      })()],
      ['Geolocation', 'geolocation' in nav],
      ['Clipboard API', 'clipboard' in nav],
      ['Bluetooth API', 'bluetooth' in nav],
      ['USB API', 'usb' in nav],
      ['Share API', 'share' in nav],
      ['Battery API', 'getBattery' in nav],
      ['Permissions API', 'permissions' in nav]
    ];

    const legacy = [
      ['appCodeName (deprecated)', nav.appCodeName],
      ['taintEnabled (non-standard)', tryGet(() => nav.taintEnabled ? nav.taintEnabled() : 'Unavailable')],
      ['CPU Class (IE only)', nav.cpuClass || 'N/A'],
      ['System Language (IE only)', nav.systemLanguage || 'N/A'],
      ['Browser Language (IE only)', nav.browserLanguage || 'N/A']
    ];

    setTable('navigator-info', navigatorData);
    setTable('screen-info', screenData);
    setTable('window-info', windowData);
    setTable('locale-info', localeData);
    setTable('features-info', features);
    setTable('legacy-info', legacy);

    const summaryEl = document.getElementById('summary');
    const ua = nav.userAgent.toLowerCase();
    let browser = 'Unknown';
    if (ua.includes('edg')) browser = 'Microsoft Edge';
    else if (ua.includes('chrome')) browser = 'Google Chrome';
    else if (ua.includes('safari')) browser = 'Safari';
    else if (ua.includes('firefox')) browser = 'Mozilla Firefox';
    else if (ua.includes('trident') || ua.includes('msie')) browser = 'Internet Explorer';

    const isMobile = /android|iphone|ipad|ipod|windows phone/.test(ua);
    const platform = nav.platform;

    let geoInfo = 'Location permission denied or unavailable.';

    function updateSummaryWithGeo(position) {
      const { latitude, longitude, accuracy } = position.coords;
      geoInfo = `Latitude: ${latitude.toFixed(5)}, Longitude: ${longitude.toFixed(5)} (Â±${accuracy}m)`;
      renderSummary();
    }

    function renderSummary() {
      summaryEl.innerHTML = `
        <strong>Best Guess:</strong><br>
        Browser: ${browser}<br>
        Device Type: ${isMobile ? 'Mobile' : 'Desktop'}<br>
        Platform: ${platform}<br>
        Time Zone: ${Intl.DateTimeFormat().resolvedOptions().timeZone || 'Unknown'}<br>
        Language: ${nav.language}<br>
        Geolocation: ${geoInfo}<br>
      `;
    }

    if ('geolocation' in nav) {
      nav.geolocation.getCurrentPosition(
        updateSummaryWithGeo,
        () => {
          geoInfo = 'Location permission denied or unavailable.';
          renderSummary();
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    } else {
      renderSummary();
    }
  </script>
</body>
</html>
